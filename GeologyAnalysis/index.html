<!doctype html><html lang=en><head><title>GeologyAnalysis · DarkAwesome
</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="DarkAwesome"><meta name=description content="A Focus on the Trails of Pennsylvania"><meta name=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="GeologyAnalysis"><meta name=twitter:description content="A Focus on the Trails of Pennsylvania"><meta property="og:url" content="http://darkawesome.github.io/blog/GeologyAnalysis/"><meta property="og:site_name" content="DarkAwesome"><meta property="og:title" content="GeologyAnalysis"><meta property="og:description" content="A Focus on the Trails of Pennsylvania"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2023-11-02T00:13:09-04:00"><meta property="article:modified_time" content="2023-11-02T00:13:09-04:00"><link rel=canonical href=http://darkawesome.github.io/blog/GeologyAnalysis/><link rel=preload href=/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=/blog/css/coder.min.aa5ef26fa979d6793724ae2dbd71efa94fd16cb1c5c7db3b6651f21f9892a5fd.css integrity="sha256-ql7yb6l51nk3JK4tvXHvqU/RbLHFx9s7ZlHyH5iSpf0=" crossorigin=anonymous media=screen><link rel=stylesheet href=/blog/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/images/favicon.svg sizes=any><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=http://darkawesome.github.io/blog/>DarkAwesome
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/blog/contact/>Contact</a></li><li class=navigation-item><a class=navigation-link href=/blog/blog/resume>Resume</a></li><li class=navigation-item><a class=navigation-link href=/blog/blog/>Posts</a></li></ul></section></nav><div class=content><section class="container page"><article><header><h1 class=title><a class=title-link href=http://darkawesome.github.io/blog/GeologyAnalysis/>GeologyAnalysis</a></h1></header><p>A Focus on the Trails of Pennsylvania</p><h3 id=abstract>Abstract
<a class=heading-link href=#abstract><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p><em>This Report is an in-depth look at the trails within PA from a networking perspective considering how much of an effect the environment may have on the network. Additionally, this report examines the interactions between points and the network&rsquo;s centrality.</em></p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Stop warnings printing</span>
</span></span><span style=display:flex><span>knitr<span style=color:#ff7b72;font-weight:700>::</span>opts_chunk<span style=color:#ff7b72;font-weight:700>$</span><span style=color:#d2a8ff;font-weight:700>set</span>(echo <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#79c0ff>TRUE</span>, warning<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#79c0ff>FALSE</span>, message <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#79c0ff>FALSE</span>)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Data manipulation libraries</span>
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>library</span>(sp)
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>library</span>(sf)
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>library</span>(tidyverse)
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>library</span>(tmap)
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>library</span>(spatstat)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Plotting</span>
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>library</span>(leaflet)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Machine Learning libraries</span>
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>library</span>(rpart.plot)
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>library</span>(RColorBrewer)
</span></span></code></pre></div><h2 id=introduction>Introduction
<a class=heading-link href=#introduction><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>Intended Audience: PA state park rangers and State members of the general assembly. I have been asked to provide a spatial analysis of trails in the State, to increase tourism, and make maintenance more efficient. Deploying AI-driven solutions to enhance the state&rsquo;s public recreational infrastructure. Here&rsquo;s how this could benefit a state:</p><p>Maintenance Efficiency: AI can help streamline the maintenance of state-owned trails by predicting and prioritizing repair needs. This ensures that limited resources are allocated effectively, reducing downtime and improving the safety of the trails.</p><p>Tourism Promotion: Using AI-powered mobile apps, the state can provide personalized trail recommendations to visitors based on their interests and fitness levels. This promotes tourism, boosting the local economy and increasing revenue from visitor fees.</p><p>Safety and Emergency Response: AI can be used to monitor trail conditions in real-time, identify safety hazards, and facilitate faster emergency responses in case of accidents or natural disasters, ensuring the well-being of trail users.</p><p>Overall, integrating AI into a state&rsquo;s trail network management enhances the quality of recreational experiences, supports local economies, and promotes responsible environmental stewardship. This can contribute to a positive image for the state and an improved quality of life for its residents and visitors.</p><h2 id=data-summary>Data Summary
<a class=heading-link href=#data-summary><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>These points relate to the trails in the state of Pennsylvania. The data was collected using GPS units and then checked against aerial imagery between November 2007 and October 2009. With updates being submitted by users and those being checked and updated regularly.</p><p>Topic/Source: Pennsylvania Spatial Data Access (PASDA) is Pennsylvania&rsquo;s official public access open geospatial data portal (1).</p><p>There are 2466 rows with 15 columns. However I will only be using 7 of those columns in my analysis. I think some missing data would be where the Appalachain trail goes through pennsylvania and some other trails that cross state borders. The initial map I have of the area kind of shows this but if you had no knowledge of this area you wouldn&rsquo;t know why that pattern was there.</p><h2 id=reading-in-data>Reading in Data
<a class=heading-link href=#reading-in-data><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span>
</span></span><span style=display:flex><span>data <span style=color:#ff7b72;font-weight:700>&lt;-</span><span style=color:#d2a8ff;font-weight:700>read.csv</span>(<span style=color:#a5d6ff>&#34;ExplorePAtrails_WP201703.csv&#34;</span>)
</span></span></code></pre></div><h2 id=data--spatial-wrangling>Data & Spatial Wrangling
<a class=heading-link href=#data--spatial-wrangling><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span>
</span></span><span style=display:flex><span>df <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>subset</span>(data, select <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72;font-weight:700>-</span><span style=color:#d2a8ff;font-weight:700>c</span>(NAME02, NAME03,ADA_ACCESS,ACCT_ID,COMMENTS,SUBTYPE_CO,LAT,LNG))
</span></span></code></pre></div><p>These columns were taken out of the final dataframe to remove redundancy, and because the columns that weren&rsquo;t adding to the analysis.</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>summary</span>(df)
</span></span></code></pre></div><h2 id=data-structure>Data Structure
<a class=heading-link href=#data-structure><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li>OBJECTID : Internal feature number for where the trail is.</li><li>NAME01 : The trail name</li><li>COUNTY : The county the trail is in</li><li>UPDATE : Tells the last time it was updated written in a year-month-day-time format</li><li>LATITUDE : Gives the latitude of the point</li><li>LONGITUDE : Gives the longitude of the point</li><li>TRAILID : Internal feature number</li></ul><p><img src="https://github.com/darkawesome/blog/blob/b3a9d9d135cefe0925d445748ac3e5b5fec1be93/content/img/map.png?raw=true" alt="Scatter plot"></p><h2 id=exploratory-analysis>Exploratory Analysis
<a class=heading-link href=#exploratory-analysis><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>Looking at the map before analysis there is a pattern that follows the Appalachian trail through the state.</p><p>Each point in the data sets a point along the line feature for the trials in Pennsylvania. The data presented has been collected since November 2007 and has been updated since October 2009. There are 2466 data points in the data frame. With 15 columns in the original data frame and 7 in the data frame after data wrangling.</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span>mapdata<span style=color:#ff7b72;font-weight:700>&lt;-</span><span style=color:#d2a8ff;font-weight:700>data.frame</span>(
</span></span><span style=display:flex><span>  Longitude <span style=color:#ff7b72;font-weight:700>=</span> df<span style=color:#ff7b72;font-weight:700>$</span>LONGITUDE,
</span></span><span style=display:flex><span>  Latitude <span style=color:#ff7b72;font-weight:700>=</span> df<span style=color:#ff7b72;font-weight:700>$</span>LATITUDE)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>map <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>leaflet</span>(mapdata) <span style=color:#ff7b72;font-weight:700>%&gt;%</span>
</span></span><span style=display:flex><span>  <span style=color:#d2a8ff;font-weight:700>addTiles</span>() <span style=color:#ff7b72;font-weight:700>%&gt;%</span>
</span></span><span style=display:flex><span>  <span style=color:#d2a8ff;font-weight:700>addMarkers</span>(
</span></span><span style=display:flex><span>    lng <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72;font-weight:700>~</span>Longitude,
</span></span><span style=display:flex><span>    lat <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72;font-weight:700>~</span>Latitude
</span></span><span style=display:flex><span>  )
</span></span></code></pre></div><p>This graph was done to get the points into a from that makes an interactive map.</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span>
</span></span><span style=display:flex><span>map
</span></span></code></pre></div><p><img src="https://github.com/darkawesome/blog/blob/156ac917ed83657193690353a1c346f1f290dc4e/content/img/000018.png?raw=true" alt="PA Trails map "></p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>plot</span>(mapdata)
</span></span></code></pre></div><h3 id=k-means-clustering>K-Means Clustering
<a class=heading-link href=#k-means-clustering><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>set.seed</span>(<span style=color:#a5d6ff>123</span>)
</span></span><span style=display:flex><span>data <span style=color:#ff7b72;font-weight:700>&lt;-</span> mapdata
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Perform K-Means clustering with 10 clusters </span>
</span></span><span style=display:flex><span>kmeans_result <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>kmeans</span>(mapdata, centers <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>10</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># View the clustering results</span>
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>print</span>(kmeans_result)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Cluster assignments for each data point</span>
</span></span><span style=display:flex><span>cluster_assignments <span style=color:#ff7b72;font-weight:700>&lt;-</span> kmeans_result<span style=color:#ff7b72;font-weight:700>$</span>cluster
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Cluster centroids</span>
</span></span><span style=display:flex><span>centroids <span style=color:#ff7b72;font-weight:700>&lt;-</span> kmeans_result<span style=color:#ff7b72;font-weight:700>$</span>centers
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Create a scatter plot with points colored by cluster</span>
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>library</span>(ggplot2)
</span></span><span style=display:flex><span>data_plot <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>data.frame</span>(data, Cluster <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#d2a8ff;font-weight:700>factor</span>(kmeans_result<span style=color:#ff7b72;font-weight:700>$</span>cluster))
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>ggplot</span>(data_plot, <span style=color:#d2a8ff;font-weight:700>aes</span>(x <span style=color:#ff7b72;font-weight:700>=</span> df<span style=color:#ff7b72;font-weight:700>$</span>LONGITUDE, y <span style=color:#ff7b72;font-weight:700>=</span> df<span style=color:#ff7b72;font-weight:700>$</span>LATITUDE, color <span style=color:#ff7b72;font-weight:700>=</span> Cluster)) <span style=color:#ff7b72;font-weight:700>+</span>
</span></span><span style=display:flex><span>  <span style=color:#d2a8ff;font-weight:700>geom_point</span>() <span style=color:#ff7b72;font-weight:700>+</span>
</span></span><span style=display:flex><span>  <span style=color:#d2a8ff;font-weight:700>labs</span>(title <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#34;K-Means Clustering&#34;</span>)
</span></span></code></pre></div><p><img src="https://github.com/darkawesome/blog/blob/156ac917ed83657193690353a1c346f1f290dc4e/content/img/00001e.png?raw=true" alt="K-Means Clusteriing"></p><p>The following K-means clustering has 10 clusters of sizes 41, 554, 235, 231, 90, 343, 327, 198, 217, 130.</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span>new_data <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>data.frame</span>(x <span style=color:#ff7b72;font-weight:700>=</span> mapdata)
</span></span><span style=display:flex><span>model <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>kmeans</span>(data, centers <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>10</span>)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span>wcss <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>sum</span>(kmeans_result<span style=color:#ff7b72;font-weight:700>$</span>withinss)
</span></span><span style=display:flex><span>wcss
</span></span></code></pre></div><p>A WCSS value of 473.5104 suggests that the data points are relatively close to the centroids within each cluster. With further analysis needed to find an elbow point or point where the point the reduction in WCSS starts to level off. Which tells us about the diminishing returns in terms of clustering quality as k increases.</p><p>With this point found an optimal distribution of trails can be made to have more dispersion throughout the state. However, given that the points we are using are taken from line graphs further analysis into the cluster would not be needed as the correlation would be inherent. Moving forward I will look at other factors across the state as it relates to the trail points.</p><h2 id=analyzing-the-network>Analyzing the Network
<a class=heading-link href=#analyzing-the-network><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>The Methodology behind the work below is from this paper on Spatial Statistics by Adrian Baddeley, Gopalan Nair, Suman Rakshit, Greg McSwiggan,Tilman M. Davies(2). In which they analyze research on the spatial analysis of events that occur along a network of lines.</p><h2 id=converting-to-spatial-data>Converting to Spatial Data
<a class=heading-link href=#converting-to-spatial-data><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span>trails.sf  <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>st_as_sf</span>(data,coords<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#d2a8ff;font-weight:700>c</span>(<span style=color:#a5d6ff>&#34;Longitude&#34;</span>,<span style=color:#a5d6ff>&#34;Latitude&#34;</span>),crs<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>4269</span>)
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># change the map projection </span>
</span></span><span style=display:flex><span>trails.utm <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>st_transform</span>(trails.sf,crs<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>4269</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>## This is used for making the trail into a network later on </span>
</span></span><span style=display:flex><span>trail_utm_pts <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>st_coordinates</span>(trails.utm)
</span></span></code></pre></div><h2 id=pennsylvania-trails-and-socioeconomic-status>Pennsylvania Trails and Socioeconomic Status
<a class=heading-link href=#pennsylvania-trails-and-socioeconomic-status><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># reading in the libraries</span>
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>library</span>(tmap)
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>library</span>(raster)
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>library</span>(gstat)
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>library</span>(sf)
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>library</span>(tidyverse)
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>library</span>(tigris)
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>library</span>(plotly)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#8b949e;font-style:italic>## breaks the project into parts leaving less in the environment</span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>## helps focus on the current dataframes </span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>## rm(list=ls())</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Read in the Pennsylvania county &amp; census tract boundaries from Tigris</span>
</span></span><span style=display:flex><span>county.border <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>counties</span>(<span style=color:#a5d6ff>&#34;PA&#34;</span>, cb <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#79c0ff>TRUE</span>, resolution <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#34;20m&#34;</span>)
</span></span><span style=display:flex><span>county.border <span style=color:#ff7b72;font-weight:700>&lt;-</span> county.border[,<span style=color:#d2a8ff;font-weight:700>which</span>(<span style=color:#d2a8ff;font-weight:700>names</span>(county.border) <span style=color:#ff7b72;font-weight:700>%in%</span>  <span style=color:#d2a8ff;font-weight:700>c</span>(<span style=color:#a5d6ff>&#34;GEOID&#34;</span>,
</span></span><span style=display:flex><span>                                                                   <span style=color:#a5d6ff>&#34;geometry&#34;</span>))]
</span></span><span style=display:flex><span>tract.border <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>tracts</span>(<span style=color:#a5d6ff>&#34;PA&#34;</span>, cb <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#79c0ff>TRUE</span>)
</span></span><span style=display:flex><span>tract.border <span style=color:#ff7b72;font-weight:700>&lt;-</span> tract.border[,<span style=color:#d2a8ff;font-weight:700>which</span>(<span style=color:#d2a8ff;font-weight:700>names</span>(tract.border) <span style=color:#ff7b72;font-weight:700>%in%</span>  <span style=color:#d2a8ff;font-weight:700>c</span>(<span style=color:#a5d6ff>&#34;GEOID&#34;</span>,<span style=color:#a5d6ff>&#34;geometry&#34;</span>))]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Download the Pennsylvania SOVI county data from the internet and tidy up</span>
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>download.file</span>(<span style=color:#a5d6ff>&#34;https://svi.cdc.gov/Documents/Data/2020/csv/states/Pennsylvania.csv&#34;</span>, destfile<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;SOVI2020_PA_Tract.csv&#34;</span>)
</span></span><span style=display:flex><span>tract.sovi     <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>read.csv</span>(<span style=color:#a5d6ff>&#34;SOVI2020_PA_Tract.csv&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>names</span>(tract.sovi)<span style=color:#d2a8ff;font-weight:700>[which</span>(<span style=color:#d2a8ff;font-weight:700>names</span>(tract.sovi) <span style=color:#ff7b72;font-weight:700>%in%</span> <span style=color:#a5d6ff>&#34;FIPS&#34;</span>)] <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#a5d6ff>&#34;GEOID&#34;</span>
</span></span><span style=display:flex><span>tract.sovi <span style=color:#ff7b72;font-weight:700>&lt;-</span> tract.sovi[,<span style=color:#ff7b72;font-weight:700>-</span><span style=color:#d2a8ff;font-weight:700>grep</span>(<span style=color:#a5d6ff>&#34;M_&#34;</span>,<span style=color:#d2a8ff;font-weight:700>names</span>(tract.sovi))]
</span></span><span style=display:flex><span>tract.sovi <span style=color:#ff7b72;font-weight:700>&lt;-</span> tract.sovi[,<span style=color:#ff7b72;font-weight:700>-</span><span style=color:#d2a8ff;font-weight:700>grep</span>(<span style=color:#a5d6ff>&#34;MP_&#34;</span>,<span style=color:#d2a8ff;font-weight:700>names</span>(tract.sovi))]
</span></span><span style=display:flex><span>tract.sovi <span style=color:#ff7b72;font-weight:700>&lt;-</span> tract.sovi[,<span style=color:#ff7b72;font-weight:700>-</span><span style=color:#d2a8ff;font-weight:700>grep</span>(<span style=color:#a5d6ff>&#34;SPL_&#34;</span>,<span style=color:#d2a8ff;font-weight:700>names</span>(tract.sovi))]
</span></span><span style=display:flex><span>tract.sovi <span style=color:#ff7b72;font-weight:700>&lt;-</span> tract.sovi[,<span style=color:#ff7b72;font-weight:700>-</span><span style=color:#d2a8ff;font-weight:700>grep</span>(<span style=color:#a5d6ff>&#34;EPL_&#34;</span>,<span style=color:#d2a8ff;font-weight:700>names</span>(tract.sovi))]
</span></span><span style=display:flex><span>tract.sovi <span style=color:#ff7b72;font-weight:700>&lt;-</span> tract.sovi[,<span style=color:#d2a8ff;font-weight:700>c</span>(<span style=color:#a5d6ff>1</span><span style=color:#ff7b72;font-weight:700>:</span><span style=color:#a5d6ff>49</span>,<span style=color:#a5d6ff>69</span>)]
</span></span><span style=display:flex><span>tract.sovi <span style=color:#ff7b72;font-weight:700>&lt;-</span> tract.sovi <span style=color:#ff7b72;font-weight:700>%&gt;%</span> <span style=color:#d2a8ff;font-weight:700>mutate_all</span>(<span style=color:#ff7b72;font-weight:700>~</span> <span style=color:#d2a8ff;font-weight:700>ifelse</span>(. <span style=color:#ff7b72;font-weight:700>==</span> <span style=color:#a5d6ff>-999</span>, <span style=color:#79c0ff>NA</span>, .))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Download the Pennsylvania SOVI tract data from the internet and tidy up</span>
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>download.file</span>(<span style=color:#a5d6ff>&#34;https://svi.cdc.gov/Documents/Data/2020/csv/states_counties/Pennsylvania_county.csv&#34;</span>, destfile<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;SOVI2020_PA_County.csv&#34;</span>)
</span></span><span style=display:flex><span>county.sovi <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>read.csv</span>(<span style=color:#a5d6ff>&#34;SOVI2020_PA_County.csv&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>names</span>(county.sovi)<span style=color:#d2a8ff;font-weight:700>[which</span>(<span style=color:#d2a8ff;font-weight:700>names</span>(county.sovi) <span style=color:#ff7b72;font-weight:700>%in%</span> <span style=color:#a5d6ff>&#34;FIPS&#34;</span>)] <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#a5d6ff>&#34;GEOID&#34;</span>
</span></span><span style=display:flex><span>county.sovi <span style=color:#ff7b72;font-weight:700>&lt;-</span> county.sovi[,<span style=color:#ff7b72;font-weight:700>-</span><span style=color:#d2a8ff;font-weight:700>grep</span>(<span style=color:#a5d6ff>&#34;M_&#34;</span>,<span style=color:#d2a8ff;font-weight:700>names</span>(county.sovi))]
</span></span><span style=display:flex><span>county.sovi <span style=color:#ff7b72;font-weight:700>&lt;-</span> county.sovi[,<span style=color:#ff7b72;font-weight:700>-</span><span style=color:#d2a8ff;font-weight:700>grep</span>(<span style=color:#a5d6ff>&#34;MP_&#34;</span>,<span style=color:#d2a8ff;font-weight:700>names</span>(county.sovi))]
</span></span><span style=display:flex><span>county.sovi <span style=color:#ff7b72;font-weight:700>&lt;-</span> county.sovi[,<span style=color:#ff7b72;font-weight:700>-</span><span style=color:#d2a8ff;font-weight:700>grep</span>(<span style=color:#a5d6ff>&#34;SPL_&#34;</span>,<span style=color:#d2a8ff;font-weight:700>names</span>(county.sovi))]
</span></span><span style=display:flex><span>county.sovi <span style=color:#ff7b72;font-weight:700>&lt;-</span> county.sovi[,<span style=color:#ff7b72;font-weight:700>-</span><span style=color:#d2a8ff;font-weight:700>grep</span>(<span style=color:#a5d6ff>&#34;EPL_&#34;</span>,<span style=color:#d2a8ff;font-weight:700>names</span>(county.sovi))]
</span></span><span style=display:flex><span>county.sovi <span style=color:#ff7b72;font-weight:700>&lt;-</span> county.sovi[,<span style=color:#d2a8ff;font-weight:700>c</span>(<span style=color:#a5d6ff>1</span><span style=color:#ff7b72;font-weight:700>:</span><span style=color:#a5d6ff>48</span>,<span style=color:#a5d6ff>69</span>)]
</span></span><span style=display:flex><span>county.sovi <span style=color:#ff7b72;font-weight:700>&lt;-</span> county.sovi <span style=color:#ff7b72;font-weight:700>%&gt;%</span> <span style=color:#d2a8ff;font-weight:700>mutate_all</span>(<span style=color:#ff7b72;font-weight:700>~</span> <span style=color:#d2a8ff;font-weight:700>ifelse</span>(. <span style=color:#ff7b72;font-weight:700>==</span> <span style=color:#a5d6ff>-999</span>, <span style=color:#79c0ff>NA</span>, .))
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#8b949e;font-style:italic>## Had to convert this to a charater as rather than a integer to avoid error</span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Convert GEOID column in tract.sovi to character</span>
</span></span><span style=display:flex><span>tract.sovi<span style=color:#ff7b72;font-weight:700>$</span>GEOID <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>as.character</span>(tract.sovi<span style=color:#ff7b72;font-weight:700>$</span>GEOID)
</span></span><span style=display:flex><span>county.sovi<span style=color:#ff7b72;font-weight:700>$</span>GEOID <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>as.character</span>(county.sovi<span style=color:#ff7b72;font-weight:700>$</span>GEOID)
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># IGNORE THE WARNING!</span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Merge the sovi data and the census tract borders</span>
</span></span><span style=display:flex><span>tract.sovi.sf  <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>geo_join</span>(tract.border ,tract.sovi ,by<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;GEOID&#34;</span>)
</span></span><span style=display:flex><span>county.sovi.sf <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>geo_join</span>(county.border,county.sovi,by<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;GEOID&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Finally change the map projection to </span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># the the North American Albers Equal Area Conic projection (AEA)</span>
</span></span><span style=display:flex><span>tract.sovi.sf  <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>st_transform</span>(tract.sovi.sf,<span style=color:#a5d6ff>3310</span>)
</span></span><span style=display:flex><span>county.sovi.sf <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>st_transform</span>(county.sovi.sf,<span style=color:#a5d6ff>3310</span>)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Making a map of Socioeconomic status with where the points for the trails are</span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># on a map of the different censes tracts </span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>map1 <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>qtm</span>(county.sovi.sf,dots.col<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;RPL_THEME1&#34;</span>,dots.size<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>.6</span>,dots.palette<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;Greens&#34;</span>)<span style=color:#ff7b72;font-weight:700>+</span>
</span></span><span style=display:flex><span>        <span style=color:#d2a8ff;font-weight:700>tm_shape</span>(trails.sf)<span style=color:#ff7b72;font-weight:700>+</span> <span style=color:#d2a8ff;font-weight:700>tm_dots</span>(size<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>.05</span>,col<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;red&#34;</span>)<span style=color:#ff7b72;font-weight:700>+</span>
</span></span><span style=display:flex><span>        <span style=color:#d2a8ff;font-weight:700>tm_shape</span>(tract.sovi.sf)<span style=color:#ff7b72;font-weight:700>+</span><span style=color:#d2a8ff;font-weight:700>tm_borders</span>()
</span></span><span style=display:flex><span>map2 <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>qtm</span>(county.sovi.sf,dots.col<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;RPL_THEME3&#34;</span>,dots.size<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>.6</span>,dots.palette<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;Blues&#34;</span>)<span style=color:#ff7b72;font-weight:700>+</span>
</span></span><span style=display:flex><span>        <span style=color:#d2a8ff;font-weight:700>tm_shape</span>(trails.sf)<span style=color:#ff7b72;font-weight:700>+</span> <span style=color:#d2a8ff;font-weight:700>tm_dots</span>(size<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>.05</span>,col<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;red&#34;</span>)<span style=color:#ff7b72;font-weight:700>+</span>
</span></span><span style=display:flex><span>        <span style=color:#d2a8ff;font-weight:700>tm_shape</span>(tract.sovi.sf)<span style=color:#ff7b72;font-weight:700>+</span><span style=color:#d2a8ff;font-weight:700>tm_borders</span>()
</span></span><span style=display:flex><span>map3 <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>qtm</span>(county.sovi.sf,dots.col<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;EP_NOHSDP&#34;</span>,dots.size<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>.6</span>,dots.palette<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;Oranges&#34;</span>)<span style=color:#ff7b72;font-weight:700>+</span>
</span></span><span style=display:flex><span>        <span style=color:#d2a8ff;font-weight:700>tm_shape</span>(trails.sf)<span style=color:#ff7b72;font-weight:700>+</span> <span style=color:#d2a8ff;font-weight:700>tm_dots</span>(size<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>.05</span>,col<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;red&#34;</span>)<span style=color:#ff7b72;font-weight:700>+</span>
</span></span><span style=display:flex><span>        <span style=color:#d2a8ff;font-weight:700>tm_shape</span>(tract.sovi.sf)<span style=color:#ff7b72;font-weight:700>+</span><span style=color:#d2a8ff;font-weight:700>tm_borders</span>()
</span></span><span style=display:flex><span>map4 <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>qtm</span>(county.sovi.sf,dots.col<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;EP_MUNIT&#34;</span>,dots.size<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>.6</span>,dots.palette<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;Purples&#34;</span>)<span style=color:#ff7b72;font-weight:700>+</span>
</span></span><span style=display:flex><span>        <span style=color:#d2a8ff;font-weight:700>tm_shape</span>(trails.sf)<span style=color:#ff7b72;font-weight:700>+</span> <span style=color:#d2a8ff;font-weight:700>tm_dots</span>(size<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>.05</span>,col<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;red&#34;</span>)<span style=color:#ff7b72;font-weight:700>+</span>
</span></span><span style=display:flex><span>        <span style=color:#d2a8ff;font-weight:700>tm_shape</span>(tract.sovi.sf)<span style=color:#ff7b72;font-weight:700>+</span><span style=color:#d2a8ff;font-weight:700>tm_borders</span>()
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>tmap_arrange</span>(map1,map2,map3,map4)
</span></span></code></pre></div><p><img src="https://github.com/darkawesome/blog/blob/b3a9d9d135cefe0925d445748ac3e5b5fec1be93/content/img/RPLTHeme1.png?raw=true" alt="Maps looking at Socioeconomic Status (green),Racial and Ethnic Minority Status (blue) Persons with no HS Diploma (orange) Housing in buildings with 10 or more units (purple)"></p><p>Looking at the socioeconomic status of the points across the census tracts as it relates to the trails we can not see any real disparities. Nor anything to suggest that areas with higher or lower socioeconomic status have a higher amount of trail near them.There may be other factors playing a role here like edge effects, ecological factors or even just different clusters of where people live. And this holds true across all of the other predictive factors looked at like Racial and Ethnic Minority Status.</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#8b949e;font-style:italic>## Moran&#39;s I AutoCorrelation</span>
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>library</span>(spdep)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>nb <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>poly2nb</span>(tract.sovi.sf, queen<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#79c0ff>TRUE</span>)
</span></span><span style=display:flex><span>lw <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>nb2listw</span>(nb, style<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;W&#34;</span>, zero.policy<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#79c0ff>TRUE</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Get the average neighbor Housing in buildings with 10 or more units for each polygon</span>
</span></span><span style=display:flex><span>inc.lag <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>lag.listw</span>(lw, tract.sovi.sf<span style=color:#ff7b72;font-weight:700>$</span>EP_MUNIT)
</span></span><span style=display:flex><span>inc.lag
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>plot</span>(inc.lag <span style=color:#ff7b72;font-weight:700>~</span> tract.sovi.sf<span style=color:#ff7b72;font-weight:700>$</span>EP_MUNIT, pch<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>16</span>, asp<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>1</span>)
</span></span><span style=display:flex><span>M1 <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>lm</span>(inc.lag <span style=color:#ff7b72;font-weight:700>~</span> tract.sovi.sf<span style=color:#ff7b72;font-weight:700>$</span>EP_MUNIT)
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>abline</span>(M1, col<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;blue&#34;</span>)
</span></span></code></pre></div><p><img src="https://github.com/darkawesome/blog/blob/b3a9d9d135cefe0925d445748ac3e5b5fec1be93/content/img/moransI.png?raw=true" alt="<Moran&rsquo;s I plot>"></p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Conduct the Moran&#39;s I hypothesis test</span>
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>moran.test</span>(tract.sovi.sf<span style=color:#ff7b72;font-weight:700>$</span>EP_MUNIT, listw<span style=color:#ff7b72;font-weight:700>=</span> lw)
</span></span></code></pre></div><p>Moran I test under randomisation</p><p>data: tract.sovi.sf$EP_MUNIT<br>weights: lw<br>Moran I statistic standard deviate = 37.838, p-value &lt; 2.2e-16</p><p>alternative hypothesis: greater sample estimates:</p><p>Moran I statistic 0.3863926463<br>Expectation -0.0002903600<br>Variance 0.0001044349</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>plot</span>(<span style=color:#d2a8ff;font-weight:700>moran.mc</span>(tract.sovi.sf<span style=color:#ff7b72;font-weight:700>$</span>EP_MUNIT, lw, nsim<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>999</span>, alternative<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;greater&#34;</span>))
</span></span></code></pre></div><p><img src="https://github.com/darkawesome/blog/blob/b3a9d9d135cefe0925d445748ac3e5b5fec1be93/content/img/moransIplot.png?raw=true" alt="Density of Permutation Outcomes"></p><h3 id=interpretation>Interpretation:
<a class=heading-link href=#interpretation><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>Moran’s I Statistic (0.3864):</p><p>The positive value (0.3864) indicates a positive spatial autocorrelation, suggesting that similar values tend to be close to each other in space.Which we previously have seen with the data points for the trails in the state. Standard Deviate (37.838):</p><p>The high standard deviate indicates that the observed Moran’s I value is significantly different from what we would expect under the assumption of spatial randomness. This is further supported by the very low p-value.</p><h3 id=p-value-22e-16>P-value (2.2e-16):
<a class=heading-link href=#p-value-22e-16><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>The extremely low p-value (2.2e-16) indicates strong evidence against the null hypothesis of spatial randomness. In practical terms, it suggests that the spatial pattern observed is unlikely to be due to random chance.The alternative hypothesis being “greater” suggests that the observed spatial autocorrelation is greater than what would be expected under the assumption of spatial randomness.Interpretation of a Moran’s I Plot:</p><p>Clustering in the Bottom Left Corner: This suggests local clusters of similar values. Meaning that neighboring areas tend to have similar values, contributing to positive spatial autocorrelation.</p><p>In summary, the results suggest a significant positive spatial autocorrelation, meaning that similar values are spatially clustered.</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#8b949e;font-style:italic>#testdata is the name of my variable. Yours will be the census tract or county sovi sf data.  ColumnName is the name of the column you want to color</span>
</span></span><span style=display:flex><span>map1 <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>qtm</span>(county.sovi.sf,fill<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;RPL_THEME1&#34;</span>,fill.palette<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;Greens&#34;</span>) <span style=color:#8b949e;font-style:italic>#Socioeconomic Status theme summary</span>
</span></span><span style=display:flex><span>map2 <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>qtm</span>(county.sovi.sf,fill<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;RPL_THEME3&#34;</span>,fill.palette<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;Blues&#34;</span>) <span style=color:#8b949e;font-style:italic>#Racial and Ethnic Minority Status </span>
</span></span><span style=display:flex><span>map3 <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>qtm</span>(county.sovi.sf,fill<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;EP_NOHSDP&#34;</span>,fill.palette<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;Reds&#34;</span>) <span style=color:#8b949e;font-style:italic>#Persons with no HS Diploma </span>
</span></span><span style=display:flex><span>map4 <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>qtm</span>(county.sovi.sf,fill<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;EP_MUNIT&#34;</span>,fill.palette<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;Purples&#34;</span>) <span style=color:#8b949e;font-style:italic>#Housing in buildings with 10 or more units </span>
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>tmap_arrange</span>(map1,map2,map3,map4)
</span></span></code></pre></div><p><img src="https://github.com/darkawesome/blog/blob/b3a9d9d135cefe0925d445748ac3e5b5fec1be93/content/img/sovimap.png?raw=true" alt="County level SOVI map"></p><h2 id=map-interpretation>Map Interpretation
<a class=heading-link href=#map-interpretation><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><h3 id=socioeconomic-status>Socioeconomic Status
<a class=heading-link href=#socioeconomic-status><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>Looking at the socioeconomic status across the state there are many areas of high socioeconomic status surrounded by low. Though a trend that we can see here is that the northern half of the state is more well of then the southern half. Though there are some counties that are “islands” were they are surrounded by better off counties.</p><h3 id=racial-and-ethnic-minority-status>Racial and Ethnic Minority Status
<a class=heading-link href=#racial-and-ethnic-minority-status><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>The racial and ethnic minority status is similar as far as the “islands” are concerned. Though this time two of the counties have a higher racial & ethnic minority status than those surrounding them. With there being a cluster in the eastern and south eastern bit of the state. With the remainder of the state being quite dispersed until the border with Ohio which shows a fair bit of racial dispersion. Perhaps hinting at edge effects that may be because of how the state is overall. Or it may be because of the proximity of Pittsburgh and it being a major city in the state.</p><h3 id=persons-with-no-hs-diploma>Persons with no HS Diploma
<a class=heading-link href=#persons-with-no-hs-diploma><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>This map shows a lot of interesting information where we see in Centre county and those counties around Pittsburgh having a lot of people with high school diplomas. Though in Lancaster, Juniata, and Forest counties have the highest amount of people with a high school diploma. This is could be because of the amount of colleges in the areas or perhaps the renown that the colleges in the area have.</p><h3 id=housing-in-buildings-with-10-or-more-units>Housing in buildings with 10 or more units
<a class=heading-link href=#housing-in-buildings-with-10-or-more-units><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>Here though, our highest counties in this variable are in Centre county, around Philadelphia and Pittsburgh. Additionally, we do see a lot of clustering in some areas on the south east and south west edges of the state. Perhaps again attributed to edge effects from the surrounding states. With close proximity to New Jersey and Delaware some residents may be choosing to live in Pennsylvania to reap its benefits and not have to pay those in other states.</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Adding in the Age &amp; Sex data</span>
</span></span><span style=display:flex><span>Pa.AgeSex <span style=color:#ff7b72;font-weight:700>&lt;-</span><span style=color:#d2a8ff;font-weight:700>read.csv</span>(<span style=color:#a5d6ff>&#34;American Community Survey2020(Age&amp;SEX).csv&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>## editing the GEOID column so it can merge in with the tract spatial data</span>
</span></span><span style=display:flex><span>Pa.AgeSex<span style=color:#ff7b72;font-weight:700>$</span>GEOID <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>sub</span>(<span style=color:#a5d6ff>&#34;1400000US&#34;</span>, <span style=color:#a5d6ff>&#34;&#34;</span>, Pa.AgeSex<span style=color:#ff7b72;font-weight:700>$</span>GEOID)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>## merging the frames together</span>
</span></span><span style=display:flex><span>tract.sovi.sf1  <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>geo_join</span>(tract.border ,Pa.AgeSex ,by<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;GEOID&#34;</span>)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#8b949e;font-style:italic>### Estimate of the total population that is 18 years and older </span>
</span></span><span style=display:flex><span>map5 <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>qtm</span>(tract.sovi.sf1,dots.col<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;S0101_C01_026E&#34;</span>,dots.size<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>.6</span>,dots.palette<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;Greens&#34;</span>)<span style=color:#ff7b72;font-weight:700>+</span>
</span></span><span style=display:flex><span>        <span style=color:#d2a8ff;font-weight:700>tm_shape</span>(trails.sf)<span style=color:#ff7b72;font-weight:700>+</span> <span style=color:#d2a8ff;font-weight:700>tm_dots</span>(size<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>.05</span>,col<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;red&#34;</span>)<span style=color:#ff7b72;font-weight:700>+</span>
</span></span><span style=display:flex><span>        <span style=color:#d2a8ff;font-weight:700>tm_shape</span>(tract.sovi.sf)<span style=color:#ff7b72;font-weight:700>+</span><span style=color:#d2a8ff;font-weight:700>tm_borders</span>()
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>### Estimate of the total population that is 60 years and older</span>
</span></span><span style=display:flex><span>map6 <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>qtm</span>(tract.sovi.sf1,dots.col<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;S0101_C01_028E&#34;</span>,dots.size<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>.6</span>,dots.palette<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;Blues&#34;</span>)<span style=color:#ff7b72;font-weight:700>+</span>
</span></span><span style=display:flex><span>        <span style=color:#d2a8ff;font-weight:700>tm_shape</span>(trails.sf)<span style=color:#ff7b72;font-weight:700>+</span> <span style=color:#d2a8ff;font-weight:700>tm_dots</span>(size<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>.05</span>,col<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;red&#34;</span>)<span style=color:#ff7b72;font-weight:700>+</span>
</span></span><span style=display:flex><span>        <span style=color:#d2a8ff;font-weight:700>tm_shape</span>(tract.sovi.sf)<span style=color:#ff7b72;font-weight:700>+</span><span style=color:#d2a8ff;font-weight:700>tm_borders</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>tmap_arrange</span>(map5,map6)
</span></span></code></pre></div><p><img src="https://github.com/darkawesome/blog/blob/b3a9d9d135cefe0925d445748ac3e5b5fec1be93/content/img/sovitrail.png?raw=true" alt="County level Sovi with trail points"></p><p>When we map the trails across ages of 18 years and older and 60 and older there is not much difference in the spread compared to where we see the trails neither. There are some hot spots in the 18 and older estimate. Though that could be attributed to the fact that the range of ages is significantly higher than 60 and older. On its head there are no real identifiable spots that stick out in any way in proximity to the trails. On the other hand the clusters seen in the south eastern part of the state for those 18 years old and above does look to be quite darker than other regions. There is a seemingly interesting bend near the middle of the eastern section.Where we see some darker regions following the trails but again we should take scale into account.</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#8b949e;font-style:italic>##  Persons below 150% poverty (estimate 2016-2020),at the measuring sites</span>
</span></span><span style=display:flex><span>poverty_map <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>ggplot</span>() <span style=color:#ff7b72;font-weight:700>+</span>
</span></span><span style=display:flex><span>  <span style=color:#d2a8ff;font-weight:700>geom_sf</span>(data <span style=color:#ff7b72;font-weight:700>=</span> tract.sovi.sf, <span style=color:#d2a8ff;font-weight:700>aes</span>(color <span style=color:#ff7b72;font-weight:700>=</span> E_POV150), size <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>3</span>) <span style=color:#ff7b72;font-weight:700>+</span>
</span></span><span style=display:flex><span>  <span style=color:#d2a8ff;font-weight:700>scale_color_gradient</span>(low <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#34;blue&#34;</span>, high <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#34;red&#34;</span>, name <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#34;Poverty Below 150% poverty estimate&#34;</span>) <span style=color:#ff7b72;font-weight:700>+</span>
</span></span><span style=display:flex><span>  <span style=color:#d2a8ff;font-weight:700>labs</span>(title <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#34;Poverty Levels at Measuring Sites&#34;</span>) <span style=color:#ff7b72;font-weight:700>+</span>
</span></span><span style=display:flex><span>  <span style=color:#d2a8ff;font-weight:700>theme_minimal</span>()
</span></span><span style=display:flex><span>poverty_map
</span></span></code></pre></div><p><img src="https://github.com/darkawesome/blog/blob/b3a9d9d135cefe0925d445748ac3e5b5fec1be93/content/img/povlevel.png?raw=true" alt="Poverty Map"></p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#8b949e;font-style:italic>#map showing Households with no vehicle available (estimate 2016-2020),at the measuring sites</span>
</span></span><span style=display:flex><span>NoVehicle_map <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>ggplot</span>() <span style=color:#ff7b72;font-weight:700>+</span>
</span></span><span style=display:flex><span>  <span style=color:#d2a8ff;font-weight:700>geom_sf</span>(data <span style=color:#ff7b72;font-weight:700>=</span> tract.sovi.sf, <span style=color:#d2a8ff;font-weight:700>aes</span>(color <span style=color:#ff7b72;font-weight:700>=</span> E_NOVEH), size <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>3</span>) <span style=color:#ff7b72;font-weight:700>+</span>
</span></span><span style=display:flex><span>  <span style=color:#d2a8ff;font-weight:700>scale_color_gradient</span>(low <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#34;lightblue&#34;</span>, high <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#34;darkblue&#34;</span>, name <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#34;Household with no Vehicle&#34;</span>) <span style=color:#ff7b72;font-weight:700>+</span>
</span></span><span style=display:flex><span>  <span style=color:#d2a8ff;font-weight:700>labs</span>(title <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#34;Households with no Vehicle at Measuring Sites&#34;</span>) <span style=color:#ff7b72;font-weight:700>+</span>
</span></span><span style=display:flex><span>  <span style=color:#d2a8ff;font-weight:700>theme_minimal</span>()
</span></span><span style=display:flex><span>NoVehicle_map
</span></span></code></pre></div><p><img src="https://github.com/darkawesome/blog/blob/b3a9d9d135cefe0925d445748ac3e5b5fec1be93/content/img/noV.png?raw=true" alt="Households with no Vehicle"></p><h3 id=persons-below-150-poverty-estimate>Persons Below 150% Poverty Estimate
<a class=heading-link href=#persons-below-150-poverty-estimate><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>There seems to be a large cluster around the Philadelphia area. Which again can be due to edge effects for the reasons mentioned above or perhaps more. Additionally, surrounding Philadelphia their seem to be some clustering that is happening across different census tracts with areas west of Lancaster also included. Pittsburgh also is at the center of some clustering. However, when we look on the state as a whole there are few and far between areas of really bad poverty at the state level. At lower levels these would most likely be more pronounced. Especially in areas like Philadelphia being as the hot spots can be seen from the map projection.</p><h3 id=household-with-no-vehicle>Household with no Vehicle
<a class=heading-link href=#household-with-no-vehicle><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>Looking at the whole state most households have vehicles. Though in the major cities we do see some separation from this. With some parts of the state beginning to enter a more deeper blue color. It would be a safe assumption to say that, for the majority of households withing the state, most have cars.And for that matter, of those who don’t they are near a major city in which they may not need a car for their lifestyle. Given public transportation or even the ability to walk, bike or use a ride sharing app to get to the places they need to go.</p><h2 id=part-4-regression-analysis>Part 4 Regression Analysis
<a class=heading-link href=#part-4-regression-analysis><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Fit OLS Regression model</span>
</span></span><span style=display:flex><span>model12 <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>lm</span>(RPL_THEME1 <span style=color:#ff7b72;font-weight:700>~</span> EP_NOHSDP, data <span style=color:#ff7b72;font-weight:700>=</span> county.sovi.sf)
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>summary</span>(model12)
</span></span></code></pre></div><h4 id=call>Call:
<a class=heading-link href=#call><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><h4 id=lmformula--rpl_theme1--ep_nohsdp-data--countysovisf>lm(formula = RPL_THEME1 ~ EP_NOHSDP, data = county.sovi.sf)
<a class=heading-link href=#lmformula--rpl_theme1--ep_nohsdp-data--countysovisf><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><h4 id=heading><a class=heading-link href=#heading><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><h4 id=residuals>Residuals:
<a class=heading-link href=#residuals><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><h4 id=min-1q-median-3q-max>Min 1Q Median 3Q Max
<a class=heading-link href=#min-1q-median-3q-max><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><h4 id=-046501--020453--006398-022251-051435>-0.46501 -0.20453 -0.06398 0.22251 0.51435
<a class=heading-link href=#-046501--020453--006398-022251-051435><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><h4 id=heading-1><a class=heading-link href=#heading-1><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><h4 id=coefficients>Coefficients:
<a class=heading-link href=#coefficients><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><h4 id=estimate-std-error-t-value-prt>Estimate Std. Error t value Pr(>|t|)
<a class=heading-link href=#estimate-std-error-t-value-prt><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><h4 id=intercept--013861-011205--1237-0221>(Intercept) -0.13861 0.11205 -1.237 0.221
<a class=heading-link href=#intercept--013861-011205--1237-0221><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><h4 id=ep_nohsdp-006620-001124-5890-149e-07->EP_NOHSDP 0.06620 0.01124 5.890 1.49e-07 ***
<a class=heading-link href=#ep_nohsdp-006620-001124-5890-149e-07-><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><h4 id=--->&mdash;
<a class=heading-link href=#---><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><h4 id=signif-codes-0--0001--001--005--01---1>Signif. codes: 0 &lsquo;<em><strong>&rsquo; 0.001 &lsquo;</strong>&rsquo; 0.01 &lsquo;</em>&rsquo; 0.05 &lsquo;.&rsquo; 0.1 &rsquo; &rsquo; 1
<a class=heading-link href=#signif-codes-0--0001--001--005--01---1><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><h4 id=heading-2><a class=heading-link href=#heading-2><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><h4 id=residual-standard-error-02399-on-65-degrees-of-freedom>Residual standard error: 0.2399 on 65 degrees of freedom
<a class=heading-link href=#residual-standard-error-02399-on-65-degrees-of-freedom><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><h4 id=multiple-r-squared-0348-adjusted-r-squared-0338>Multiple R-squared: 0.348, Adjusted R-squared: 0.338
<a class=heading-link href=#multiple-r-squared-0348-adjusted-r-squared-0338><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><h4 id=f-statistic-3469-on-1-and-65-df-p-value-1495e-07>F-statistic: 34.69 on 1 and 65 DF, p-value: 1.495e-07
<a class=heading-link href=#f-statistic-3469-on-1-and-65-df-p-value-1495e-07><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Visualize the regression line</span>
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>ggplot</span>(county.sovi.sf, <span style=color:#d2a8ff;font-weight:700>aes</span>( EP_NOHSDP, RPL_THEME1)) <span style=color:#ff7b72;font-weight:700>+</span>
</span></span><span style=display:flex><span>  <span style=color:#d2a8ff;font-weight:700>geom_point</span>() <span style=color:#ff7b72;font-weight:700>+</span>
</span></span><span style=display:flex><span>  <span style=color:#d2a8ff;font-weight:700>geom_smooth</span>(method <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#34;lm&#34;</span>, se <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#79c0ff>FALSE</span>, col <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#34;blue&#34;</span>) <span style=color:#ff7b72;font-weight:700>+</span>
</span></span><span style=display:flex><span>  <span style=color:#d2a8ff;font-weight:700>labs</span>(title <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#34;OLS Regression&#34;</span>,  EP_NOHSDP <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#34;#Persons with no HS Diploma &#34;</span>, RPL_THEME1 <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#34;Socioeconomic Status theme summary&#34;</span>)
</span></span></code></pre></div><p><img src="https://github.com/darkawesome/blog/blob/b3a9d9d135cefe0925d445748ac3e5b5fec1be93/content/img/olsReg.png/?raw=true" alt="OLS Regression"></p><p>The coefficient for persons with no high school diploma (EP_NOHSDP) is 0.06620. This indicates that for a one-unit increase in persons with no high school diploma , socioeconomic status is expected to increase by 0.06620 units, if you were to hold the other variables constant.The intercept is -0.13861, representing the estimated value of socioeconomic status when persons with no high school diploma is zero.</p><h3 id=significance-of-coefficients>Significance of Coefficients:
<a class=heading-link href=#significance-of-coefficients><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>The t-value for persons with no high school diploma is 5.890, and the corresponding p-value is very small (1.49e-07). This suggests that the coefficient for persons with no high school diploma is statistically significant, indicating that it’s unlikely to be zero.</p><h3 id=r-squared-and-adjusted-r-squared>R-squared and Adjusted R-squared:
<a class=heading-link href=#r-squared-and-adjusted-r-squared><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>The multiple R-squared is 0.348, meaning that approximately 34.8% of the variability in the dependent variable is explained by the independent variable(s) in the model. The adjusted R-squared (0.338) accounts for the number of predictors in the model and is slightly lower than the multiple R-squared.</p><h3 id=f-statistic>F-statistic:
<a class=heading-link href=#f-statistic><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>The F-statistic (34.69) tests the overall significance of the model. With a p-value of 1.495e-07, you can reject the null hypothesis that all coefficients are zero. This suggests that at least one predictor variable is related to the response variable.</p><p>In summary, the model suggests that there is a statistically significant relationship between socioeconomic Status and persons with no high school diploma. The model explains about 34.8% of the variability in socioeconomic status, and the relationship is significant based on the low p-value from the F-test.</p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#8b949e;font-style:italic># Histogram of the Response and Predictor Variable</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>hist</span>(x<span style=color:#ff7b72;font-weight:700>=</span>county.sovi.sf<span style=color:#ff7b72;font-weight:700>$</span>RPL_THEME1)
</span></span></code></pre></div><p><img src="https://github.com/darkawesome/blog/blob/b3a9d9d135cefe0925d445748ac3e5b5fec1be93/content/img/hist1.png?raw=true" alt="Histogram of county based on socieconomic status"></p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>hist</span>(x<span style=color:#ff7b72;font-weight:700>=</span>county.sovi.sf<span style=color:#ff7b72;font-weight:700>$</span>EP_NOHSDP)
</span></span></code></pre></div><p><img src="https://github.com/darkawesome/blog/blob/b3a9d9d135cefe0925d445748ac3e5b5fec1be93/content/img/hist2.png?raw=true" alt="Histogram of countiess based on having no High School Diploma"></p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>library</span>(hrbrthemes)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>LinearFit <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>lm</span>(RPL_THEME1 <span style=color:#ff7b72;font-weight:700>~</span> EP_NOHSDP, data <span style=color:#ff7b72;font-weight:700>=</span> county.sovi.sf, na.action<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;na.exclude&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>county.sovi.sf<span style=color:#ff7b72;font-weight:700>$</span>ModelledOutput   <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>predict</span>(LinearFit)
</span></span><span style=display:flex><span>county.sovi.sf<span style=color:#ff7b72;font-weight:700>$</span>Linear.Residuals <span style=color:#ff7b72;font-weight:700>&lt;-</span> <span style=color:#d2a8ff;font-weight:700>residuals</span>(LinearFit)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># with linear trend</span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic># looking at no hs diploma and socioeconomic status</span>
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>ggplot</span>(county.sovi.sf, <span style=color:#d2a8ff;font-weight:700>aes</span>(x<span style=color:#ff7b72;font-weight:700>=</span>EP_NOHSDP, y<span style=color:#ff7b72;font-weight:700>=</span>RPL_THEME1)) <span style=color:#ff7b72;font-weight:700>+</span>
</span></span><span style=display:flex><span>  <span style=color:#d2a8ff;font-weight:700>geom_point</span>() <span style=color:#ff7b72;font-weight:700>+</span>
</span></span><span style=display:flex><span>  <span style=color:#d2a8ff;font-weight:700>geom_smooth</span>(method<span style=color:#ff7b72;font-weight:700>=</span>lm , color<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;red&#34;</span>, se<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#79c0ff>FALSE</span>) <span style=color:#ff7b72;font-weight:700>+</span>
</span></span><span style=display:flex><span>  <span style=color:#d2a8ff;font-weight:700>theme_ipsum</span>()
</span></span></code></pre></div><p><img src="https://github.com/darkawesome/blog/blob/b3a9d9d135cefe0925d445748ac3e5b5fec1be93/content/img/lBF.png?raw=true" alt="Line of Best Fit"></p><div class=highlight><pre tabindex=0 style=color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>summary</span>(LinearFit)
</span></span></code></pre></div><h4 id=heading-3><a class=heading-link href=#heading-3><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><h4 id=call-1>Call:
<a class=heading-link href=#call-1><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><h4 id=lmformula--rpl_theme1--ep_nohsdp-data--countysovisf-naaction--naexclude>lm(formula = RPL_THEME1 ~ EP_NOHSDP, data = county.sovi.sf, na.action = &ldquo;na.exclude&rdquo;)
<a class=heading-link href=#lmformula--rpl_theme1--ep_nohsdp-data--countysovisf-naaction--naexclude><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><h4 id=heading-4><a class=heading-link href=#heading-4><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><h4 id=residuals-1>Residuals:
<a class=heading-link href=#residuals-1><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><h4 id=min-1q-median-3q-max-1>Min 1Q Median 3Q Max
<a class=heading-link href=#min-1q-median-3q-max-1><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><h4 id=-046501--020453--006398-022251-051435-1>-0.46501 -0.20453 -0.06398 0.22251 0.51435
<a class=heading-link href=#-046501--020453--006398-022251-051435-1><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><h4 id=heading-5><a class=heading-link href=#heading-5><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><h4 id=coefficients-1>Coefficients:
<a class=heading-link href=#coefficients-1><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><h4 id=estimate-std-error-t-value-prt-1>Estimate Std. Error t value Pr(>|t|)
<a class=heading-link href=#estimate-std-error-t-value-prt-1><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><h4 id=intercept--013861-011205--1237-0221-1>(Intercept) -0.13861 0.11205 -1.237 0.221
<a class=heading-link href=#intercept--013861-011205--1237-0221-1><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><h4 id=ep_nohsdp-006620-001124-5890-149e-07--1>EP_NOHSDP 0.06620 0.01124 5.890 1.49e-07 ***
<a class=heading-link href=#ep_nohsdp-006620-001124-5890-149e-07--1><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><h4 id=----1>&mdash;
<a class=heading-link href=#----1><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><h4 id=signif-codes-0--0001--001--005--01---1-1>Signif. codes: 0 &lsquo;<em><strong>&rsquo; 0.001 &lsquo;</strong>&rsquo; 0.01 &lsquo;</em>&rsquo; 0.05 &lsquo;.&rsquo; 0.1 &rsquo; &rsquo; 1
<a class=heading-link href=#signif-codes-0--0001--001--005--01---1-1><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><h4 id=heading-6><a class=heading-link href=#heading-6><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><h4 id=residual-standard-error-02399-on-65-degrees-of-freedom-1>Residual standard error: 0.2399 on 65 degrees of freedom
<a class=heading-link href=#residual-standard-error-02399-on-65-degrees-of-freedom-1><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><h4 id=multiple-r-squared-0348-adjusted-r-squared-0338-1>Multiple R-squared: 0.348, Adjusted R-squared: 0.338
<a class=heading-link href=#multiple-r-squared-0348-adjusted-r-squared-0338-1><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><h4 id=f-statistic-3469-on-1-and-65-df-p-value-1495e-07-1>F-statistic: 34.69 on 1 and 65 DF, p-value: 1.495e-07
<a class=heading-link href=#f-statistic-3469-on-1-and-65-df-p-value-1495e-07-1><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><p>The model suggests that there is a statistically significant linear relationship between socioeconomic status and persons with no high school diploma. The positive coefficient for persons with no high school diploma indicates that an increase in persons with no high school diplomais associated with an increase in socioeconomic status.</p><p>The R-squared value indicates that the model explains about 34.8% of the variability in socioeconomic status. This means that other factors not included in the model may contribute to the remaining variability.</p><p>The F-statistic is highly significant, supporting the overall fit of the model. In summary, based on the provided information, the model appears to be a statistically significant predictor of socioeconomic status, and the coefficient for persons with no high school diploma is positive and significant.</p><h1 id=conclusion>Conclusion
<a class=heading-link href=#conclusion><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h1><p>After exploring the spatial characteristics and network analysis of trails in the state of Pennsylvania. The primary objective was to provide valuable insights for Pennsylvania state park rangers and members of the general assembly to enhance tourism, improve trail maintenance efficiency, and deploy AI-driven solutions for recreational infrastructure management.</p><h2 id=key-findings-spatial-analysis-of-trails>Key Findings: Spatial Analysis of Trails:
<a class=heading-link href=#key-findings-spatial-analysis-of-trails><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>Utilizing spatial analysis techniques, the study examined 2,466 trail data points collected from GPS units and cross-referenced with aerial imagery. A distinct pattern following the Appalachian Trail through the state was observed. K-Means clustering was employed to group trails into 10 clusters based on geographic coordinates.
The resulting clusters provided insights into the distribution and dispersion of trails across the state.Network analysis using graph theory was initiated to study the connectivity of trail points. However, due to challenges with the loop structure, further exploration was curtailed. The study integrated data on socioeconomic status, racial and ethnic minority status, education levels, and housing characteristics at the census tract and county levels. The analysis revealed patterns and clusters in these demographic factors across the state. Moran’s I statistic indicated positive spatial autocorrelation, suggesting that similar values were clustered spatially.The analysis hinted at local clusters of similar socioeconomic conditions.Regression analysis was conducted to explore the relationship between socioeconomic status and the number of persons with no high school diploma. The model provided insights into the impact of education levels on socioeconomic status.</p><h3 id=implications-and-recommendations>Implications and Recommendations:
<a class=heading-link href=#implications-and-recommendations><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>The study’s findings can be leveraged to enhance tourism promotion strategies. AI-driven mobile apps can recommend personalized trail experiences based on visitor interests and fitness levels. AI solutions can be deployed to predict and prioritize trail maintenance needs, ensuring efficient allocation of resources and enhancing trail safety Consideration of demographic patterns and socioeconomic factors can inform community engagement initiatives. Tailored programs can be developed to address the diverse needs and preferences of different regions.</p><h3 id=further-network-analysis>Further Network Analysis:
<a class=heading-link href=#further-network-analysis><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>Despite challenges in the initial network analysis, further exploration is recommended. Refining the loop structure and addressing errors in the code could provide valuable insights into the connectivity of trail points.Collaborative efforts with environmental scientists, ecologists, and urban planners can enrich the study’s findings. Exploring the relationship between trail networks and environmental factors may contribute to a more comprehensive understanding.</p><p>In conclusion, the study presents a multifaceted analysis of Pennsylvania’s trail network, laying the groundwork for informed decision-making in trail management, tourism promotion, and community engagement. Further research and collaboration can build upon these findings for the continued enhancement of Pennsylvania’s recreational infrastructure.</p><ol><li><p><a href=https://www.pasda.psu.edu/ class=external-link target=_blank rel=noopener>https://www.pasda.psu.edu/</a></p><p>This is where I got the data for the trails from and the specific file name of it is Explore PA trails - Trails (points).
This feature class contains points associated with the line feature class for trails in the state of Pennsylvania, as prepared by the PA DCNR, Rails-to-Trails Conservancy, PA Fish and Boat Commission, and Keystone Trails Association.
The majority of the data was collected using GPS units and checked for quality and accuracy against high-resolution aerial imagery.
See Method.
Data was collected between November 2007 and October 2009.
See Subtype Code for point type.
Trail updates are submitted by users through explorepatrails.com and are evaluated and updated on a regular basis.↩︎</p></li><li><p>Adrian Baddeley, Gopalan Nair, Suman Rakshit, Greg McSwiggan, Tilman M. Davies, Analysing point patterns on networks — A review, Spatial Statistics, Volume 42, 2021, 100435, ISSN 2211-6753, <a href=https://doi.org/10.1016/j.spasta.2020.100435 class=external-link target=_blank rel=noopener>https://doi.org/10.1016/j.spasta.2020.100435</a>.
(<a href=https://www.sciencedirect.com/science/article/pii/S2211675320300294 class=external-link target=_blank rel=noopener>https://www.sciencedirect.com/science/article/pii/S2211675320300294</a>) Abstract: We review recent research on statistical methods for analysing spatial patterns of points on a network of lines, such as road accident locations along a road network.
Due to geometrical complexities, the analysis of such data is extremely challenging, and we describe several common methodological errors.
The intrinsic lack of homogeneity in a network militates against the traditional methods of spatial statistics based on stationary processes.
Topics include kernel density estimation, relative risk estimation, parametric and non-parametric modelling of intensity, second-order analysis using the K-function and pair correlation function, and point process model construction.
An important message is that the choice of distance metric on the network is pivotal in the theoretical development and in the analysis of real data.
Challenges for statistical computation are discussed and open-source software is provided.
Keywords: Distance metric; Kernel density estimation; K-function; Nonparametric estimation; Pair correlation function; Stationary process↩︎</p></li></ol></article></section></div><footer class=footer><section class=container>©
2025
DarkAwesome
·
Powered by <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/ target=_blank rel=noopener>Coder</a>.</section></footer></main><script src=/blog/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script></body></html>